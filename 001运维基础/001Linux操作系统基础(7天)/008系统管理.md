# ğŸ§  008 ç³»ç»Ÿç®¡ç†

------

## 1ï¸âƒ£ ğŸ§© ç³»ç»Ÿç›‘æ§ä¸æ€§èƒ½åˆ†æ

å¸¸ç”¨å‘½ä»¤ï¼š

```bash
top                 # å®æ—¶æŸ¥çœ‹CPUã€å†…å­˜ã€è¿›ç¨‹çŠ¶æ€
htop                # æ›´å‹å¥½çš„è¿›ç¨‹ç›‘æ§ï¼ˆéœ€å®‰è£…ï¼‰
vmstat 2            # æ¯2ç§’è¾“å‡ºä¸€æ¬¡CPUã€å†…å­˜ã€I/Oä¿¡æ¯
iotop               # ç›‘æ§ç£ç›˜I/Oï¼ˆéœ€rootæƒé™ï¼‰
free -h             # æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ
uptime              # æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½åŠè¿è¡Œæ—¶é—´
dmesg | tail        # æŸ¥çœ‹å†…æ ¸æ—¥å¿—ï¼ˆå¦‚ç£ç›˜æˆ–ç½‘å¡é—®é¢˜ï¼‰
sar -u 1 5          # æŸ¥çœ‹CPUæ€§èƒ½ï¼ˆéœ€å®‰è£…sysstatï¼‰
```

ğŸ“˜ **é‡ç‚¹ç›‘æ§æŒ‡æ ‡ï¼š**

| æŒ‡æ ‡           | å«ä¹‰         | è¯´æ˜                         |
| -------------- | ------------ | ---------------------------- |
| load average   | ç³»ç»Ÿå¹³å‡è´Ÿè½½ | 1ã€5ã€15åˆ†é’Ÿå†…çš„è¿è¡Œé˜Ÿåˆ—é•¿åº¦ |
| %CPU           | CPUå ç”¨ç‡    | é«˜äº80%éœ€å…³æ³¨                |
| %MEM           | å†…å­˜å ç”¨ç‡   | é«˜å†…å­˜è¿›ç¨‹å¯ç”¨`top`æ’æŸ¥      |
| waï¼ˆI/O waitï¼‰ | I/Oç­‰å¾…æ—¶é—´  | é«˜åˆ™è¡¨ç¤ºç£ç›˜ç“¶é¢ˆ             |

------

## 2ï¸âƒ£ ğŸ§  æœåŠ¡ç®¡ç†ï¼ˆsystemdï¼‰

ç°ä»£Linuxç³»ç»Ÿï¼ˆå¦‚CentOS 7+/Ubuntu 16+ï¼‰å‡ä½¿ç”¨ **systemd** ç®¡ç†ç³»ç»ŸæœåŠ¡ã€‚

```bash
systemctl status nginx      # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl start nginx       # å¯åŠ¨æœåŠ¡
systemctl stop nginx        # åœæ­¢æœåŠ¡
systemctl restart nginx     # é‡å¯æœåŠ¡
systemctl enable nginx      # å¼€æœºè‡ªå¯
systemctl disable nginx     # ç¦æ­¢å¼€æœºè‡ªå¯
```

### ğŸ” æœåŠ¡ä¸æ—¥å¿—æŸ¥çœ‹

```bash
systemctl list-units --type=service    # æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨æœåŠ¡
journalctl -u nginx                    # æŸ¥çœ‹nginxæ—¥å¿—
journalctl -xe                         # æŸ¥çœ‹æœ€è¿‘çš„ç³»ç»Ÿé”™è¯¯æ—¥å¿—
```

ğŸ“˜ **systemd æ—¥å¿—è¿‡æ»¤æŠ€å·§ï¼š**

```bash
journalctl --since "2025-11-08 08:00" --until "2025-11-08 10:00"
journalctl -p err -b                  # æŸ¥çœ‹æœ¬æ¬¡å¯åŠ¨ä»¥æ¥çš„é”™è¯¯æ—¥å¿—
```

------

## 3ï¸âƒ£ â° å®šæ—¶ä»»åŠ¡ï¼ˆat ä¸ crontabï¼‰

Linux æä¾›ä¸¤ç§å®šæ—¶æ‰§è¡Œæœºåˆ¶ï¼š

| å·¥å…·   | ç”¨é€”           | é€‚ç”¨åœºæ™¯               |
| ------ | -------------- | ---------------------- |
| `at`   | æ‰§è¡Œä¸€æ¬¡æ€§ä»»åŠ¡ | æ¯”å¦‚æ˜å¤©å‡Œæ™¨è·‘ä¸€æ¬¡è„šæœ¬ |
| `cron` | å¾ªç¯å‘¨æœŸä»»åŠ¡   | æ¯”å¦‚æ¯å¤©å¤‡ä»½ä¸€æ¬¡       |

------

### ğŸ• atå‘½ä»¤ï¼ˆä¸€æ¬¡æ€§ä»»åŠ¡ï¼‰

```bash
at 23:00
at> /usr/local/bin/backup.sh
at> <EOT>     # Ctrl+D ç»“æŸè¾“å…¥
```

æŸ¥çœ‹ä»»åŠ¡ï¼š

```bash
atq
```

åˆ é™¤ä»»åŠ¡ï¼š

```bash
atrm <ä»»åŠ¡å·>
```

------

### ğŸ•“ crontabï¼ˆå‘¨æœŸä»»åŠ¡ï¼‰

ç¼–è¾‘ä»»åŠ¡è¡¨ï¼š

```bash
crontab -e
```

æŸ¥çœ‹å½“å‰ä»»åŠ¡ï¼š

```bash
crontab -l
```

------

#### ğŸ§® cronæ—¶é—´æ ¼å¼è¯´æ˜

```bash
* * * * * command
â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€ æ˜ŸæœŸ (0-7, 0å’Œ7éƒ½è¡¨ç¤ºæ˜ŸæœŸå¤©)
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€ æœˆä»½ (1-12)
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€ æ—¥æœŸ (1-31)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0-23)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0-59)
```

ç¤ºä¾‹ï¼š
 æ¯å¤©å‡Œæ™¨3ç‚¹æ‰§è¡Œ `/usr/bin/backup.sh`

```bash
0 3 * * * /usr/bin/backup.sh
```

ğŸ“˜ **æ›´å¤šä¾‹å­ï¼š**

| æ—¶é—´è¡¨è¾¾å¼    | è¯´æ˜               |
| ------------- | ------------------ |
| `*/5 * * * *` | æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡    |
| `0 */2 * * *` | æ¯2å°æ—¶æ‰§è¡Œä¸€æ¬¡    |
| `30 2 * * 1`  | æ¯å‘¨ä¸€å‡Œæ™¨2:30æ‰§è¡Œ |
| `@reboot`     | å¼€æœºæ—¶æ‰§è¡Œä¸€æ¬¡     |

------

## 4ï¸âƒ£ ğŸ§¾ ç³»ç»Ÿæ—¥å¿—ç®¡ç†

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š

| æ–‡ä»¶è·¯å¾„            | è¯´æ˜                 |
| ------------------- | -------------------- |
| `/var/log/messages` | ç³»ç»Ÿçº§æ—¥å¿—ï¼ˆCentOSï¼‰ |
| `/var/log/syslog`   | ç³»ç»Ÿæ—¥å¿—ï¼ˆUbuntuï¼‰   |
| `/var/log/auth.log` | ç™»å½•ä¸æƒé™è®°å½•       |
| `/var/log/cron`     | å®šæ—¶ä»»åŠ¡æ—¥å¿—         |
| `/var/log/dmesg`    | å†…æ ¸ä¸ç¡¬ä»¶æ—¥å¿—       |
| `/var/log/secure`   | å®‰å…¨ä¸è®¤è¯æ—¥å¿—       |

å¸¸ç”¨å‘½ä»¤ï¼š

```bash
tail -f /var/log/syslog
grep "error" /var/log/messages
less /var/log/secure
```

------

## 5ï¸âƒ£ ğŸ§® ç³»ç»Ÿèµ„æºä¸ä¿¡æ¯æŸ¥è¯¢

```bash
uname -a            # æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬
lsb_release -a      # æŸ¥çœ‹å‘è¡Œç‰ˆä¿¡æ¯
hostnamectl         # æŸ¥çœ‹ä¸»æœºåä¸ç³»ç»Ÿä¿¡æ¯
df -h               # æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
du -sh *            # æŸ¥çœ‹ç›®å½•å¤§å°
uptime              # ç³»ç»Ÿè¿è¡Œæ—¶é•¿
who                 # å½“å‰ç™»å½•ç”¨æˆ·
last                # ç™»å½•å†å²
```

------

## 6ï¸âƒ£ ğŸ§° å¯åŠ¨ä¸è¿è¡Œçº§åˆ«ï¼ˆrunlevel / targetï¼‰

æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«ï¼š

```bash
systemctl get-default
```

åˆ‡æ¢è¿è¡Œçº§åˆ«ï¼š

```bash
sudo systemctl set-default multi-user.target     # å‘½ä»¤è¡Œæ¨¡å¼
sudo systemctl set-default graphical.target      # å›¾å½¢æ¨¡å¼
```

å¸¸è§è¿è¡Œçº§åˆ«å¯¹ç…§è¡¨ï¼š

| ç›®æ ‡ï¼ˆTargetï¼‰      | è¯´æ˜           |
| ------------------- | -------------- |
| `rescue.target`     | å•ç”¨æˆ·æ¨¡å¼     |
| `multi-user.target` | å¤šç”¨æˆ·æ–‡æœ¬æ¨¡å¼ |
| `graphical.target`  | å›¾å½¢ç•Œé¢æ¨¡å¼   |
| `reboot.target`     | é‡å¯ç³»ç»Ÿ       |
| `poweroff.target`   | å…³æœº           |

------

### âœ… æœ¬èŠ‚æ€»ç»“

| æ¨¡å—         | å‘½ä»¤                      | åŠŸèƒ½             |
| ------------ | ------------------------- | ---------------- |
| **ç³»ç»Ÿç›‘æ§** | `top`, `vmstat`, `iotop`  | æ€§èƒ½åˆ†æ         |
| **æœåŠ¡ç®¡ç†** | `systemctl`, `journalctl` | å¯åŠ¨ã€åœæ­¢ã€æ—¥å¿— |
| **å®šæ—¶ä»»åŠ¡** | `crontab`, `at`           | ä»»åŠ¡è°ƒåº¦         |
| **æ—¥å¿—åˆ†æ** | `tail`, `grep`, `less`    | æ•…éšœæ’æŸ¥         |
| **ç³»ç»Ÿä¿¡æ¯** | `uname`, `df`, `uptime`   | çŠ¶æ€æŸ¥çœ‹         |
| **è¿è¡Œçº§åˆ«** | `systemctl set-default`   | æ¨¡å¼åˆ‡æ¢         |

ğŸ’¡ **è®°å¿†å£è¯€ï¼š**

> â€œçœ‹ç³»ç»Ÿ â†’ ç®¡æœåŠ¡ â†’ å®šä»»åŠ¡ â†’ æŸ¥æ—¥å¿— â†’ æ§çº§åˆ«â€ï¼Œ
>  å°±æ˜¯å®Œæ•´çš„ Linux ç³»ç»Ÿç®¡ç†äº”æ­¥æ³•ã€‚